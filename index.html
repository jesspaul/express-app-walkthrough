<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script defer src="script.js"></script>
    <title>Express App Walkthrough</title>
</head>
<body>
    <header>
        <h1>Express App Walkthrough</h1>
        <p>A step by step look at creating a simple CRUD todo app with Express.</p>
    </header>
    <main>
        <ol>
            <li class="section">
                <p class="section direction">Set up file structure</p>
                <ol>
                    <li>
                        <p class="direction">Create project folder</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">mkdir express-todo-app</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create server.js file</p>
                        <div class="code">
                            <p class="location">In terminal in project folder: </p>
                            <code class="code-line">touch server.js</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Initialize npm with defaults</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">npm init -y</code>
                            <p class="note">This creates <code>package.json</code></p>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Install npm packages</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">npm i express ejs morgan method-override</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Setup MVC folder structure</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">mkdir models views controllers routes</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create initial files</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">touch views/index.ejs routes/index.js</code>
                        </div>
                    </li>
                </ol>
            </li>

            <li class="section">
                <p class="section direction">Set up the server</p>
                <ol>
                    <li>
                        <p class="direction">Open folder in VS Code</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">code .</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Load in express</p>
                        <div class="code">
                            <p class="location">In server.js: </p>
                            <code class="code-line">const express = require('express');</code><br>
                            <code class="code-line">const app = express();</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Set the view engine</p>
                        <div class="code">
                            <p class="location">In server.js: </p>
                            <code class="code-line">app.set('view engine', 'ejs');</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Mount middleware</p>
                        <div class="code">
                            <p class="location">In server.js: </p>
                            <code class="code-line">app.use(morgan('dev'));</code><br>
                            <code class="code-line">app.use(express.static('public'));</code><br>
                            <code class="code-line">app.use(express.urlencoded({ extended: false }));</code><br>
                            <code class="code-line">app.use(methodOverride('_method'));</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Listen on a port</p>
                        <div class="code">
                            <p class="location">In server.js: </p>
                            <code class="code-line">app.listen(3000, function() {</code><br>
                                <code class="code-line tabbed">console.log('Express is listening on port 3000');</code><br>
                            <code class="code-line">});</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Start the app</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">nodemon</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">View the app</p>
                        <div class="code">
                            <p class="location">In the browser: </p>
                            <code class="code-line">localhost:3000</code>
                        </div>
                    </li>
                </ol>
            </li>
            
            <li class="section">
                <p class="section direction">Set up the "database"</p>
                <ol>
                    <li>
                        <p class="direction">Create a file to act as the "database"</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">touch models/todo.js</code>
                            <p class="note">The file is written as singular by convention</p>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create an array of todo objects</p>
                        <div class="code">
                            <p class="location">In models/todo.js</p>
                            <code class="code-line">const todos = [</code><br>
                            <code class="code-line tabbed">{text: 'Feed Dogs', done: true},</code><br>
                            <code class="code-line tabbed">{text: 'Learn Express', done: false},</code><br>
                            <code class="code-line tabbed">{text: 'Buy Milk', done: false}</code><br>
                            <code class="code-line">];</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create methods to access one or all todo objects</p>
                        <div class="code">
                            <p class="location">In models/todo.js: </p>
                            <code class="code-line">function getAll() {</code><br>
                            <code class="code-line tabbed">return todos;</code><br>
                            <code class="code-line">};</code><br>
                            <code class="code-line">function getOne(id) {</code><br>
                            <code class="code-line tabbed">return todos[id];</code><br>
                            <code class="code-line">};</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Export the methods</p>
                        <div class="code">
                            <p class="location">In models/todo.js: </p>
                            <code class="code-line">module.exports = {</code><br>
                            <code class="code-line tabbed">getAll,</code><br>
                            <code class="code-line tabbed">getOne,</code><br>
                            <code class="code-line">};</code>
                        </div>
                    </li>
                </ol>
            </li>

            <li class="section">
                <p class="section direction">Set up home page</p>
                <ol>
                    <li>
                        <p class="direction">Create home page</p>
                        <div class="code">
                            <p class="location">In index.ejs: </p>
                            <p class="code-line">! for boilerplate HTML</p>
                            <p class="code-line">Write HTML content in the body</p>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Load Express in index router</p>
                        <div class="code">
                            <p class="location">In routes/index.js: </p>
                            <code class="code-line">const express = require('express');</code><br>
                            <code class="code-line">const router = express.Router();</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create index router function</p>
                        <div class="code">
                            <p class="location">In routes/index.js: </p>
                            <code class="code-line">router.get('/', function(req, res) {</code><br>
                            <code class="code-line tabbed">res.render('index');</code><br>
                            <code class="code-line">});</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Export index router</p>
                        <div class="code">
                            <p class="location">In routes/index.js: </p>
                            <code class="code-line">module.exports = router;</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Load index router in server</p>
                        <div class="code">
                            <p class="location">In server.js: </p>
                            <code class="code-line">const indexRouter = require('./routes/index');</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Mount index route</p>
                        <div class="code">
                            <p class="location">In server.js: </p>
                            <code class="code-line">app.use('/', indexRouter);</code>
                        </div>
                    </li>
                </ol>
            </li>
            <li class="section">
                <p class="section direction">Set up todos index</p>
                <ol>
                    <li>
                        <p class="direction">Create folder and index file for todos</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">mkdir views/todos</code><br>
                            <code class="code-line">touch views/todos/index.ejs</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Write basic content for todos index</p>
                        <div class="code">
                            <p class="location">In views/todos/index.ejs: </p>
                            <p class="code-line">! for boilerplate HTML</p>
                            <p class="code-line">Write basic HTML content in the body</p>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create todos controller</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">touch controllers/todos.js</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Load model data</p>
                        <div class="code">
                            <p class="location">In controllers/todos.js: </p>
                            <code class="code-line">const Todo = require('../models/todo');</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Write function for todos index route</p>
                        <div class="code">
                            <p class="location">In controllers/todos.js: </p>
                            <code class="code-line">function index(req, res) {</code><br>
                            <code class="code-line tabbed">res.render('todos/index', {</code><br>
                            <code class="code-line double-tabbed">todos: Todo.getAll(),</code><br>
                            <code class="code-line tabbed">});</code><br>
                            <code class="code-line">};</code><br>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Export todos index router function</p>
                        <div class="code">
                            <p class="location">In controllers/todos.js: </p>
                            <code class="code-line">module.exports = {</code><br>
                            <code class="code-line tabbed">index</code><br>
                            <code class="code-line">};</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create todos router</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">touch routes/todos.js</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Load Express in todos router</p>
                        <div class="code">
                            <p class="location">In routes/todos.js: </p>
                            <code class="code-line">const express = require('express');</code><br>
                            <code class="code-line">const router = express.Router();</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Load controller function</p>
                        <div class="code">
                            <p class="location">In routes/todos.js: </p>
                            <code class="code-line">const express = require('../controllers/todos');</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create todos index router</p>
                        <div class="code">
                            <p class="location">In routes/todos.js: </p>
                            <code class="code-line">router.get('/', todosCtrl.index);</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Export todos router</p>
                        <div class="code">
                            <p class="location">In routes/todos.js: </p>
                            <code class="code-line">module.exports = router;</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Load todo router in server</p>
                        <div class="code">
                            <p class="location">In server.js: </p>
                            <code class="code-line">const todosRouter = require('./routes/todos');</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Mount todo route</p>
                        <div class="code">
                            <p class="location">In server.js: </p>
                            <code class="code-line">app.use('/todos', todosRouter);</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Load todos data in index view</p>
                        <div class="code">
                            <p class="location">In views/todos/index.ejs:</p>
                            <code class="code-line">&lt;ul></code><br>
                            <code class="code-line tabbed"><% todos.forEach(function(todo, idx) { %></code><br>
                            <code class="code-line tabbed">&lt;li></code><br>
                            <code class="code-line double-tabbed">&lt;%= todo.text %> : &lt;%= todo.done ? 'Done' : 'Not done' %></code><br>
                            <code class="code-line tabbed">&lt;/li></code><br>
                            <code class="code-line">&lt;% }); %></code><br>
                            <code class="code-line">&lt;/ul></code>
                        </div>
                    </li>
                </ol>
            </li>
            <li class="section">
                <p class="section direction">Set up the show functionality</p>
                <ol>
                    <li>
                        <p class="direction">Add link to each todo item in the index view</p>
                        <div class="code">
                            <p class="location">In views/todos/index.ejs</p>
                            <code class="code-line">&lt;a href="/todos/&lt;%= idx %>">&lt;%= todo.text %>&lt;/a></code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Add a show route</p>
                        <div class="code">
                            <p class="location">In routes/todos.js: </p>
                            <code class="code-line">router.get('/:id', todosCtrl.show);</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create the show controller function</p>
                        <div class="code">
                            <p class="location">In controllers/todos.js: </p>
                            <code class="code-line">function show(req, res) {</code><br>
                            <code class="code-line tabbed">res.render('todos/show', {</code><br>
                            <code class="code-line double-tabbed">todo: Todo.getOne(req.params.id),</code><br>
                            <code class="code-line double-tabbed">todoNum: parseInt(req.params.id) + 1</code><br>
                            <code class="code-line tabbed">});</code><br>
                            <code class="code-line">};</code><br>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Export the show function</p>
                        <div class="code">
                            <p class="location">In controllers/todos.js: </p>
                            <code class="code-line">module.exports = {</code><br>
                            <code class="code-line tabbed">index,</code><br>
                            <code class="code-line tabbed">show</code><br>
                            <code class="code-line">};</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create the show view</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">touch views/todos/show.ejs</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Write content for show view</p>
                        <div class="code">
                            <p class="location">In views/todos/show.ejs</p>
                            <p class="code-line">! for boilerplate HTML and add the following into the body: </p>
                            <code class="code-line">&lt;a href="/">Home&lt;/a></code><br>
                            <code class="code-line">&lt;a href="/todos">All Todos&lt;/a></code><br>
                            <code class="code-line">&lt;h1>Todo #&lt;%= todoNum %>&lt;/h1></code><br>
                            <code class="code-line">&lt;h3>&lt;%= todo.text %>&lt;/h3></code><br>
                            <code class="code-line">&lt;h3>Complete: &lt;%= todo.done ? 'Yes' : 'No' %>&lt;/h3></code>
                        </div>
                    </li>
                </ol>
            </li>
            <li class="section">
                <p class="section direction">Add new todo</p>
                <ol>
                    <li>
                        <p class="direction">Add a link to create a new todo</p>
                        <div class="code">
                            <p class="location">In views/todos/index.ejs</p>
                            <code class="code-line">&lt;a href="/todos/new">Add To-Do&lt;/a></code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Add the route for a new todo</p>
                        <div class="code">
                            <p class="location">In routes/todos.js</p>
                            <code class="code-line">router.get('/new', todosCtrl.new);</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Add the controller function for a new todo</p>
                        <div class="code">
                            <p class="location">In controllers/todos.js</p>
                            <code class="code-line">function newTodo(req, res) {</code><br>
                            <code class="code-line tabbed">res.render('todos/new');</code><br>
                            <code class="code-line">};</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Export the new controller function</p>
                        <div class="code">
                            <p class="location"></p>
                            <code class="code-line">module.exports = {</code><br>
                            <code class="code-line tabbed">...</code><br>
                            <code class="code-line tabbed">new: newTodo</code><br>
                            <code class="code-line">};</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create the new view</p>
                        <div class="code">
                            <p class="location">In terminal: </p>
                            <code class="code-line">touch views/todos/new.ejs</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Write content for new view</p>
                        <div class="code">
                            <p class="location">In views/todos/new.ejs</p>
                            <p class="code-line">! for boilerplate HTML and add the following into the body: </p>
                            <code class="code-line">&lt;h1>New Todo&lt;/h1></code><br>
                            <code class="code-line">&lt;form action="/todos" method="POST">&lt;/form></code><br>
                            <code class="code-line tabbed">&lt;input type="text" name="text"></code><br>
                            <code class="code-line tabbed">&lt;button type="submit">Save Todo&lt;/button></code><br>
                            <code class="code-line">&lt;/form></code><br>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Add the create route</p>
                        <div class="code">
                            <p class="location">In routes/todos.js</p>
                            <code class="code-line">router.post('/', todosCtrl.create);</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Create the create controller function</p>
                        <div class="code">
                            <p class="location">In controllers/todos.js</p>
                            <code class="code-line">function create(req, res) {</code><br>
                            <code class="code-line tabbed">req.body.done = false;</code><br>
                            <code class="code-line tabbed">Todo.create(req.body);</code><br>
                            <code class="code-line tabbed">res.redirect('/todos');</code><br>
                            <code class="code-line">};</code><br>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Export the create controller function</p>
                        <div class="code">
                            <p class="location"></p>
                            <code class="code-line">module.exports = {</code><br>
                            <code class="code-line tabbed">...</code><br>
                            <code class="code-line tabbed">create</code><br>
                            <code class="code-line">};</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction">Add the create function in the model</p>
                        <div class="code">
                            <p class="location">In models/todo.js</p>
                            <code class="code-line">function create(todo) {</code><br>
                                <code class="code-line tabbed">todos.push(todo);</code><br>
                                <code class="code-line">};</code>
                        </div>
                    </li>
                    <li>
                        <p class="direction"></p>
                        <div class="code">
                            <p class="location"></p>
                            <code class="code-line"></code>
                        </div>
                    </li>
                    <li>
                        <p class="direction"></p>
                        <div class="code">
                            <p class="location"></p>
                            <code class="code-line"></code>
                        </div>
                    </li>
                </ol>
            </li>
        </ol>
    </main>
</body>
</html>